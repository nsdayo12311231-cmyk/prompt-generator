# プロンプト出力くん - 要件定義書

## 1. 概要
### 1.1 目的
- SD(Stable Diffusion)初心者が簡単に英語プロンプトを生成できるWebアプリケーション
- GPT契約なしでも使える無料サービスの提供

### 1.2 ターゲットユーザー
- SD画像生成の初心者
- 英語プロンプト作成に困っているユーザー
- 講座受講生

## 2. 機能要件

### 2.1 コア機能
**日本語→英語プロンプト変換**
- 日本語キーワード入力（単語・短文対応）
- 3-8個の英語候補を出力
- 微妙なニュアンス解釈（「ちょっと怖い感じ」等）
- 質問返しなし、推測補完型

**出力形式**
- 簡潔な単語・短文
- 名詞・形容詞両方対応
- 似た意味の重複も出力

### 2.2 UI機能
- ワンクリックコピー機能
- Enter キー対応
- レスポンシブデザイン
- 直感的操作（説明不要）

### 2.3 システム機能
- 複数API対応（フォールバック）
- エラーハンドリング
- ユーザーフレンドリーなエラーメッセージ

## 3. 技術仕様

### 3.1 技術スタック
- **フロントエンド**: HTML + JavaScript（バニラ）
- **API**: Gemini API（メイン）+ GPT/Claude（代替）
- **ホスティング**: Vercel
- **コスト**: 月1,000円以下目標

### 3.2 API仕様
**メインAPI**: Gemini Pro
- 月1,500回まで無料
- アダルトコンテンツ制限緩め

**代替API**: GPT-3.5-turbo / Claude API
- コスト効率重視
- フォールバック機能

### 3.3 セキュリティ
- 一般的セキュリティレベル
- APIキー環境変数管理
- HTTPS通信

## 4. 非機能要件

### 4.1 パフォーマンス
- レスポンス時間: 3秒以内
- 同時接続: 50-200ユーザー対応

### 4.2 可用性
- 月間稼働率: 99%以上
- API障害時の代替手段確保

### 4.3 使いやすさ
- ワンクリック操作
- エラー時の明確なガイダンス
- モバイル対応

## 5. 制約事項

### 5.1 コスト制約
- 無料提供サービス
- 月間運用費1,000円以下

### 5.2 技術制約
- サーバーレス構成
- API依存（オフライン不可）

### 5.3 コンテンツ制約
- 一部アダルトコンテンツ対応
- 違法・有害コンテンツは対象外

## 6. 入出力例

### 6.1 基本例
```
入力: 「頭」
出力: head, portrait, face, hair, expression, closeup, profile
```

### 6.2 感情表現例
```
入力: 「悲しい表情」  
出力: sad, crying, melancholy, tears, depressed, sorrow, emotional
```

### 6.3 複雑な表現例
```
入力: 「考え込んでる顔」
出力: thinking, contemplating, pensive, thoughtful, pondering, concentrated
```

## 7. エラー処理

### 7.1 API エラー
- **ユーザー向け**: 「少し時間をおいて再試行してください」
- **システム**: 代替APIに自動切り替え

### 7.2 入力エラー  
- 空入力: 「キーワードを入力してください」
- 無効文字: 自動除去して処理継続

## 8. 開発・運用方針

### 8.1 開発アプローチ
- MVP優先（最小機能リリース）
- 段階的機能追加
- ユーザーフィードバック重視

### 8.2 テスト方針
- 手動テスト中心
- 多様な日本語表現での検証
- 実際のSD生成での品質確認

### 8.3 運用方針
- コスト監視
- API制限アラート
- 簡易的なログ取得

## 9. 今後の拡張予定
- お気に入り機能（LocalStorage）
- 履歴機能
- カテゴリフィルター
- 複数キーワード対応
- ネガティブプロンプト生成